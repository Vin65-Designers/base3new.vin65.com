var vin65={form:{init:function(){$(document).off("submit","[v65js=form]"),$(document).off("submit","[v65js=view]"),$(document).on("submit","[v65js=form]",vin65.form.submit),$(document).on("submit","[v65js=view]",vin65.form.submit)},loading:{add:function(e){console.log("loadingAdd"),vin65.form.error.clean(e),e.addClass("loading")},remove:function(e){console.log("loadingremove"),e.removeClass("loading")}},error:{add:function(e,o){vin65.form.error.clean(),$(o).prepend("<div v65js='errorNotifications' class='v65-errorNotifications'></div>"),e.errorArray.forEach(function(e,i,t){$("[v65js=errorNotifications]").append("<div v65js='errorItem' class='v65-error v65-field-"+e.field+"'>"+e.message+"</div>"),$(o).find("[name="+e.field+"]").addClass("v65-error"),$(o).find("[for="+e.field+"]").addClass("v65-error")}),$("html,body").animate({scrollTop:$("[v65js=errorNotifications]").offset().top-70},"slow")},clean:function(e){console.log("errorclean"),$("[v65js=errorNotifications]").remove(),$(".v65-has-error").removeClass("v65-error")}},submit:function(){var e=$(this),o=new Date;return e.attr("action")?postURL=e.attr("action")+"&timestamp="+o.getTime():e.attr("href")?postURL=e.attr("href")+"&timestamp="+o.getTime():e.attr("data-href")&&(postURL=e.attr("data-href")+"&timestamp="+o.getTime()),vin65.form.loading.add(e),request=$.post(postURL,e.serialize()),request.done(function(o){vin65.form.response(o,e)}),request.fail(function(o){vin65.form.error.add(o,e)}),!1},response:function(response,$element){var d=new Date;try{response=JSON.parse(response)}catch(e){}if(1==response.isSuccessful){switch(response.successURL){case"reload":location.reload();break;case"loadInDiv":loadURL=response.successURL+"&timestamp="+d.getTime(),$element.load(loadURL);break;default:window.document.location=response.successURL}response.jsCallback&&eval(response.jsCallback)}else 0==response.isSuccessful?vin65.form.error.add(response,$element):$element.replaceWith(response)}},utilities:{init:function(){vin65.utilities.mainMenu(),vin65.utilities.equalizeTableDays(),vin65.utilities.equalizeProductGroupProducts(),vin65.tabPicker(),vin65.quickViewOpen()},mainMenu:function(){$(".v65-layoutHeaderNav ul li ul li").hover(function(){$(this).parent().parent().children("a").toggleClass("hover")})},equalizeTableDays:function(){$(".v65-calendarDay").equalize(7)},equalizeProductGroupProducts:function(){$(".v65-product-group .v65-product").equalize(4)}},blog:{toggleArchives:function(e){$("[vin65js=v65-blogArchiveYear"+e+"]").toggle("fast")}},login:{toggleSocialLogin:function(){$(".v65-checkoutLoginOtherSocialApps").toggle("fast")}},cart:{toggleCart:function(){var e=$(".v65-cartDropdown").is(":visible");e===!0?$(".v65-cartDropdown").slideUp("slow"):$(".v65-cartDropdown").slideDown("slow")}},member:{toggleMemberMenu:function(){var e=$(".v65-memberDropdown").is(":visible");e===!0?$(".v65-memberDropdown").slideUp("slow"):$(".v65-memberDropdown").slideDown("slow")}},tabPicker:function(){$(".v65-product-tabs li a").click(function(e){var o,i;i=$(this).parent(),o=$(".v65-product-tabs li").index(i),vin65.showTab(o),e.preventDefault()})},showTab:function(e){var o=e;$(".v65-product-tabs li").removeClass("v65-product-tabsActive"),$(".v65-product-tabs li:eq("+o+")").addClass("v65-product-tabsActive"),$(".v65-product-tab").removeClass("v65-product-tabActive"),$(".v65-product-tab:eq("+o+")").addClass("v65-product-tabActive")},quickViewOpen:function(){$(".v65-product-quickViewOpen").click(function(e){$(".v65-product-quickView").css("display","block"),e.preventDefault()}),$(".v65-product-quickViewClose").click(function(e){$(".v65-product-quickView").css("display","none"),e.preventDefault()})}};!function($,e){$.fn.equalize=function(e){for(var o=0;o<this.length;o+=e){var i=this.slice(o,o+e),t=[],r;for(r=0;e>r;r++)t.push(i.eq(r).height());var n=Math.max.apply(Math,t);i.css("height",n)}return this}}(jQuery),vin65.form.init(),vin65.utilities.init();